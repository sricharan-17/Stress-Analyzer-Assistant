<!DOCTYPE html>
<html>
<head>
    <title>Stress Analyzer & Assistant</title>
</head>
<body>

<h1>Stress Analyzer & Assistant</h1>

<form method="POST">

    <label>Age</label>
    <input type="number" name="age" required>

    <label>CGPA</label>
    <input type="number" step="0.01" name="cgpa" required>

    <label>Gender</label>
    <select name="gender">
        <option value="Male">Male</option>
        <option value="Female">Female</option>
    </select>

    <label>City</label>
    <select name="city">
        <option value="Chennai">Chennai</option>
        <option value="Bangalore">Bangalore</option>
        <option value="Delhi">Delhi</option>
        <option value="Jaipur">Jaipur</option>
        <option value="Varanasi">Varanasi</option>
        <option value="Srinagar">Srinagar</option>
        <option value="Visakhapatnam">Visakhapatnam</option>
    </select>

    <label>Academic Pressure (1–10)</label>
    <input type="number" name="academic_pressure" min="1" max="10" required>

    <label>Study Satisfaction (1–5)</label>
    <input type="number" name="study_satisfaction" min="1" max="5" required>

    <label>Sleep Duration</label>
    <select name="sleep_duration">
        <option value="Less than 5 hours">Less than 5 hours</option>
        <option value="5-6 hours">5-6 hours</option>
        <option value="7-8 hours">7-8 hours</option>
    </select>

    <label>Dietary Habits</label>
    <select name="dietary_habits">
        <option value="Healthy">Healthy</option>
        <option value="Moderate">Moderate</option>
        <option value="Unhealthy">Unhealthy</option>
    </select>

    <label>Degree</label>
    <select name="degree">
        <option value="B.Tech">B.Tech</option>
        <option value="BSc">BSc</option>
        <option value="BCA">BCA</option>
        <option value="BA">BA</option>
        <option value="M.Tech">M.Tech</option>
    </select>

    <label>Suicidal Thoughts</label>
    <select name="suicidal">
        <option value="No">No</option>
        <option value="Yes">Yes</option>
    </select>

    <label>Work / Study Hours</label>
    <input type="number" name="work_hours" min="0" required>

    <label>Financial Stress (1–5)</label>
    <input type="number" name="financial_stress" min="1" max="5" required>

    <label>Family History of Mental Illness</label>
    <select name="family_history">
        <option value="No">No</option>
        <option value="Yes">Yes</option>
    </select>

    <label>Depression</label>
    <select name="depression">
        <option value="0">No</option>
        <option value="1">Yes</option>
    </select>

    <br><br>
    <button type="submit">Analyze</button>
</form>

{% if prediction %}
    <h2>Stress Level: {{ prediction }}</h2>
{% endif %}

{% if contributors and contributors|length > 0 %}
    <h3>Top Contributing Factors</h3>
    <ul>
        {% for c in contributors %}
            <li>{{ c }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% if llm_text %}
    <h3>Personalized Recommendations</h3>
    <p style="white-space: pre-line;">
        {{ llm_text }}
    </p>
{% endif %}

</body>
</html>
